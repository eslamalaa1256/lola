<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LOLA | Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #2a7a55;
      --secondary-color: #f8f8f8;
      --accent-color: #e74c3c;
      --text-color: #333;
      --text-light: #666;
      --border-color: #e6e6e6;
      --shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--secondary-color);
      color: var(--text-color);
      line-height: 1.6;
    }

    a {
      text-decoration: none;
      color: inherit;
      transition: var(--transition);
    }

    /* ======================
       Header Ù…Ø¹ Ø§Ù„ÙÙ„ØªØ±Ø©
    ====================== */
    .top-bar {
      display: flex;
      flex-direction: column;
      background: #fff;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .header-main {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 30px;
    }

    .logo {
      font-size: 28px;
      font-weight: bold;
      color: black;
      letter-spacing: 2px;
    }

    .nav-actions {
      display: flex;
      align-items: center;
      gap: 15px;
    }


    .cart-icon, .wishlist-icon {
      position: relative;
      cursor: pointer;
      font-size: 20px;
      transition: transform 0.2s ease;
    }

    .cart-icon:hover, .wishlist-icon:hover {
      transform: scale(1.2);
      color: #f0c040;
    }

    .cart-count {
      background: var(--accent-color);
    }

    .wishlist-count {
      background: #3498db;
    }

    .cart-count, .wishlist-count {
      position: absolute;
      top: -5px;
      right: -6px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }

    #loginBtn {
      padding: 6px 14px;
      border: 1px solid black;
      border-radius: 20px;
      background: white;
      cursor: pointer;
      font-size: 14px;
      transition: var(--transition);
    }

    #loginBtn:hover {
      background: black;
      color: white;
    }

    #userIcon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #f0f0f0;
      color: #000;
      display: none;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      transition: var(--transition);
    }

    #userIcon:hover {
      transform: scale(1.1);
      background: #ddd;
    }

    /* Ø§Ù„ÙÙ„ØªØ±Ø© ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø± */
    .header-filters {
      background: #f8f9fa;
      padding: 15px 30px;
      border-top: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }

    .filters {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .filter-btn {
      padding: 8px 16px;
      border: 1px solid #ddd;
      background: white;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
    }
    
    .filter-btn.active {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }
    
    .filter-btn:hover:not(.active) {
      border-color: var(--primary-color);
      color: var(--primary-color);
    }

    .header-search-filter {
      display: flex;
      align-items: center;
    }

    .header-search-filter input {
      padding: 8px 15px;
      border: 1px solid #ddd;
      border-radius: 20px;
      width: 200px;
      text-align: right;
    }

    .filter-toggle {
      display: none;
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
    }

    /* ======================
       Products Header
    ====================== */
    .products-header {
      background: #f2efe8;
      padding: 40px 30px;
      text-align: center;
    }

    .products-header h1 { font-size: 32px; margin-bottom: 10px; }
    .products-header p { font-size: 16px; color: #555; }

    /* ======================
       Product Grid
    ====================== */
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
      padding: 40px 30px;
    }

    .product-card {
      background: #fff;
      border-radius: 15px;
      box-shadow: var(--shadow);
      padding: 20px;
      text-align: center;
      transition: var(--transition);
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .product-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 25px rgba(248, 248, 248, 0.2);
    }

    .product-card img {
      width: 100%;
      height: 220px;
      object-fit: cover;
      border-radius: 12px;
      transition: var(--transition);
    }

    .product-card:hover img {
      transform: scale(1.05);
    }

    .product-card h3 { font-size: 19px; margin: 12px 0 8px; }
    .product-card .price { 
      font-size: 18px; 
      color: var(--accent-color); 
      font-weight: bold;
      margin: 10px 0;
    }

    .product-card .old-price {
      font-size: 14px;
      color: #999;
      text-decoration: line-through;
      margin-right: 8px;
    }

    .product-card .rating {
      color: #f39c12;
      font-size: 16px;
      margin: 8px 0;
    }

    .product-card .rating span { margin-left: 5px; color: #666; }

    .badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background: var(--accent-color);
      color: #fff;
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: bold;
    }

    /* Ø²Ø±Ø§Ø± Ø¬ÙˆÙ‡ Ø§Ù„ÙƒØ§Ø±Øª */
    .product-card .actions {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 15px;
    }

    .product-card .actions button {
      background: var(--primary-color);
      color: #fff;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: var(--transition);
    }

    .product-card .actions button:hover {
      background: #1e5a3d;
      transform: scale(1.1);
    }

    /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© */
    .toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #333;
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .toast.show {
      opacity: 1;
    }
    
    .back-to-top {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: var(--primary-color);
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 99;
    }
    
    .back-to-top.visible {
      opacity: 1;
    }
    
    .skeleton {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 200% 100%;
      animation: loading 1.5s infinite;
      border-radius: 8px;
    }
    
    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    .no-products {
      grid-column: 1 / -1;
      text-align: center;
      padding: 40px;
      font-size: 18px;
      color: #777;
    }

    footer {
      background: #111;
      color: #fff;
      text-align: center;
      padding: 20px;
      margin-top: 30px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    footer a { 
      color: #fff; 
      margin: 0 5px; 
      font-weight: 500; 
    }
    
    footer a:hover { 
      color: #ccc; 
    }

    /* ======================
       Responsive
    ====================== */
    @media (max-width: 992px) {
      .header-filters {
        flex-direction: column;
        align-items: stretch;
      }
      
      .filters {
        justify-content: center;
      }
      
      .header-search-filter {
        justify-content: center;
      }
    }

    @media (max-width: 768px) {
      .header-main {
        padding: 10px 15px;
      }

      .logo { font-size: 24px; }
      
      #search-box { 
        width: 150px; 
        font-size: 13px; 
        padding: 5px 8px; 
      }
      
      #search-box:focus {
        width: 180px;
      }
      
      #loginBtn { font-size: 12px; padding: 4px 10px; }
      #userIcon { width: 32px; height: 32px; font-size: 16px; }
      
      .header-filters {
        padding: 10px 15px;
      }
      
      .filters {
        gap: 8px;
      }
      
      .filter-btn {
        padding: 6px 12px;
        font-size: 13px;
      }
      
      .header-search-filter input {
        width: 150px;
        padding: 6px 12px;
      }
      
      .product-grid {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        padding: 20px 15px;
        gap: 15px;
      }
    }

    @media (max-width: 576px) {
      .header-main { 
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
      }
      
      .logo { 
        font-size: 22px; 
        margin-bottom: 10px;
        width: 100%;
        text-align: center;
      }
      
      .nav-actions {
        width: 100%;
        justify-content: center;
        flex-wrap: wrap;
      }
      
      #search-box { 
        width: 120px; 
        font-size: 12px; 
      }
      
      #search-box:focus {
        width: 140px;
      }
      
      .header-filters {
        display: none;
      }
      
      .header-filters.active {
        display: flex;
      }
      
      .filter-toggle {
        display: block;
        position: absolute;
        top: 70px;
        left: 15px;
        z-index: 100;
      }
      
      .filters {
        flex-direction: column;
        width: 100%;
      }
      
      .filter-btn {
        width: 100%;
        text-align: center;
        border-radius: 8px;
      }
      
      .header-search-filter {
        width: 100%;
      }
      
      .header-search-filter input {
        width: 100%;
      }
    }
  </style>
</head>
<body>

<!-- Ø§Ù„Ù‡ÙŠØ¯Ø± Ù…Ø¹ Ø§Ù„ÙÙ„ØªØ±Ø© -->
<header class="top-bar">
  <div class="header-main">
    <a href="index.html" class="logo">LOLA</a>
    <div class="nav-actions">
      <div class="cart-icon" onclick="window.location.href='cart.html'">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count" id="cart-count">0</span>
      </div>
      <div class="wishlist-icon" onclick="window.location.href='favorites.html'">
        <i class="fas fa-heart"></i>
        <span class="wishlist-count" id="wishlist-count">0</span>
      </div>
      <a href="javascript:void(0)" id="loginBtn" onclick="doLogin()">ØªØ³Ø¬ÙŠÙ„ / Ø¯Ø®ÙˆÙ„</a>
      <a href="profile.html" id="userIcon"><i class="fas fa-user"></i></a>
    </div>
  </div>
  
  <!-- Ø§Ù„ÙÙ„ØªØ±Ø© ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø± -->
  <div class="header-filters" id="headerFilters">
    <div class="filters" id="filters">
      <button class="filter-btn active" data-category="all">Ø§Ù„ÙƒÙ„</button>
      <button class="filter-btn" data-category="Ø£Ø­Ø°ÙŠØ©">Ø£Ø­Ø°ÙŠØ©</button>
      <button class="filter-btn" data-category="Ù…Ù„Ø§Ø¨Ø³">Ù…Ù„Ø§Ø¨Ø³</button>
      <button class="filter-btn" data-sort="price-asc">Ø§Ù„Ø³Ø¹Ø±: Ù…Ù† Ø§Ù„Ø£Ù‚Ù„ Ù„Ù„Ø£Ø¹Ù„Ù‰</button>
      <button class="filter-btn" data-sort="price-desc">Ø§Ù„Ø³Ø¹Ø±: Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„</button>
    </div>
    
    <div class="header-search-filter">
      <input type="text" id="search-filter" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬ Ù…Ø¹ÙŠÙ†...">
    </div>
  </div>
  
  <button class="filter-toggle" id="filterToggle">
    <i class="fas fa-filter"></i> ÙÙ„Ø§ØªØ±
  </button>
</header>

<!-- Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
<section class="products-header">
  <h1>ÙƒÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h1>
  <p>ØªØ³ÙˆÙ‚ ØªØ´ÙƒÙŠÙ„ØªÙ†Ø§ Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ù…Ù† Ø§Ù„Ù…Ù„Ø§Ø¨Ø³ ÙˆØ§Ù„Ø£Ø­Ø°ÙŠØ©</p>
</section>

<main>
  <div class="product-grid" id="product-grid">
    <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¹Ø¸Ù…ÙŠ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
    <div class="skeleton-card">
      <div class="skeleton" style="height: 200px; margin-bottom: 10px;"></div>
      <div class="skeleton" style="height: 20px; width: 80%; margin-bottom: 10px;"></div>
      <div class="skeleton" style="height: 15px; width: 60%;"></div>
    </div>
    <!-- Ø³ÙŠØªÙ… ØªÙƒØ±Ø§Ø± Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¹Ø¸Ù…ÙŠ Ù„Ø¹Ø¯Ø© Ø¨Ø·Ø§Ù‚Ø§Øª -->
  </div>
</main>

<!-- Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰ -->
<div class="back-to-top" id="backToTop"><i class="fas fa-arrow-up"></i></div>

<!-- Ø¥Ø´Ø¹Ø§Ø± Toast -->
<div class="toast" id="toast"></div>

<footer>
  <div>Â© 2025 LOLA Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</div>
  <div>
    <a href="about.html">Ø¹Ù†Ù‘Ø§</a> |
    <a href="contact.html">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a> |
    <a href="privacy.html">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a> |
    <a href="Terms of Use.html">Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</a>
  </div>
</footer>


    <script>
        const products = [
            {
                id: 1,
                name: "Ø­Ø°Ø§Ø¡ Ø±ÙŠØ§Ø¶ÙŠ Ø±Ø¬Ø§Ù„ÙŠ",
                price: 500,
                displayPrice: "500 Ø¬Ù†ÙŠÙ‡",
                oldPrice: 650,
                displayOldPrice: "650 Ø¬Ù†ÙŠÙ‡",
                image: "assets/images/shoe2.png",
                rating: 4.5,
                reviews: 128,
                badge: "Ø®ØµÙ… 23%",
                category: "Ø£Ø­Ø°ÙŠØ©"
            },
            {
                id: 2,
                name: "Ù‚Ù…ÙŠØµ Ø´Ø¨Ø§Ø¨ÙŠ",
                price: 450,
                displayPrice: "450 Ø¬Ù†ÙŠÙ‡",
                oldPrice: 550,
                displayOldPrice: "550 Ø¬Ù†ÙŠÙ‡",
                image: "assets/images/shirt1.webp",
                rating: 4.8,
                reviews: 89,
                badge: "Ø®ØµÙ… 18%",
                category: "Ù…Ù„Ø§Ø¨Ø³"
            },
            // Ù‡Ù†Ø§ Ø¨Ø§Ù‚ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (ØªÙ…Ø§Ù…Ø§Ù‹ Ù…Ø«Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚)
        ];

        function createRating(rating) {
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5;
            let starsHTML = '';
            for (let i = 0; i < fullStars; i++) {
                starsHTML += '<i class="fas fa-star"></i>';
            }
            if (halfStar) {
                starsHTML += '<i class="fas fa-star-half-alt"></i>';
            }
            const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);
            for (let i = 0; i < emptyStars; i++) {
                starsHTML += '<i class="far fa-star"></i>';
            }
            return starsHTML;
        }

        function showToast(message, duration = 3000) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');

            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        function filterProducts(category = 'all', searchTerm = '') {
            const grid = document.getElementById('product-grid');
            const productCards = document.querySelectorAll('.product-card');
            let visibleCount = 0;

            // Ø­Ø°Ù Ø±Ø³Ø§Ù„Ø© "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª" Ù‚Ø¨Ù„ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±Ø©
            const noProductsMessage = document.querySelector('.no-products');
            if (noProductsMessage) noProductsMessage.remove();

            productCards.forEach(card => {
                const productCategory = card.dataset.category;
                const productName = card.querySelector('h3').textContent.toLowerCase();
                const matchesCategory = category === 'all' || productCategory === category;
                const matchesSearch = searchTerm === '' || productName.includes(searchTerm.toLowerCase());
                if (matchesCategory && matchesSearch) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });

            if (visibleCount === 0) {
                const message = document.createElement('div');
                message.classList.add('no-products');
                message.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ØªØ·Ø§Ø¨Ù‚ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«';
                grid.appendChild(message);
            }
        }

        function loadProducts() {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = '';

            let displayProducts = products;
            const cachedProducts = localStorage.getItem('cachedProducts');
            if (cachedProducts) {
                displayProducts = JSON.parse(cachedProducts);
            } else {
                localStorage.setItem('cachedProducts', JSON.stringify(products));
            }

            displayProducts.forEach(product => {
                const card = document.createElement('div');
                card.classList.add('product-card');
                card.dataset.category = product.category;
                card.dataset.price = product.price;

                card.innerHTML = `
                    ${product.badge ? `<div class="badge">${product.badge}</div>` : ''}
                    <img src="${product.image}" alt="${product.name}" loading="lazy">
                    <h3>${product.name}</h3>
                    <p>
                        <span class="price">${product.displayPrice}</span>
                        ${product.oldPrice ? `<span class="old-price">${product.displayOldPrice}</span>` : ''}
                    </p>
                    <div class="rating">
                        ${createRating(product.rating)}
                        <span>(${product.reviews} ØªÙ‚ÙŠÙŠÙ…)</span>
                    </div>
                    <div class="actions">
                        <button class="add-to-cart" aria-label="Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©"><i class="fas fa-shopping-cart"></i></button>
                        <button class="add-to-fav" aria-label="Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©"><i class="fas fa-heart"></i></button>
                    </div>
                `;
              
                // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£Ø®Ø·Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±
                const img = card.querySelector('img');
                img.onerror = function() {
                    this.src = 'https://via.placeholder.com/300x220?text=ØµÙˆØ±Ø©+ØºÙŠØ±+Ù…ØªÙˆÙØ±Ø©';
                };

                card.addEventListener('click', (e) => {
                  if (!e.target.classList.contains('add-to-cart') &&
                      !e.target.classList.contains('add-to-fav') &&
                      !e.target.closest('.add-to-cart') &&
                      !e.target.closest('.add-to-fav')) {
                    localStorage.setItem('selectedProduct', JSON.stringify(product));
                    window.location.href = 'product-details.html';
                  }
                });

                card.querySelector('.add-to-cart').addEventListener('click', (e) => {
                    e.stopPropagation();
                    let cart = JSON.parse(localStorage.getItem('cart')) || [];

                    const existingIndex = cart.findIndex(item => item.id === product.id);
                    if (existingIndex > -1) {
                        cart[existingIndex].quantity = (cart[existingIndex].quantity || 1) + 1;
                        showToast("ğŸ›’ ØªÙ… Ø²ÙŠØ§Ø¯Ø© ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„Ø³Ù„Ø©");
                    } else {
                        cart.push({...product, quantity: 1});
                        showToast("âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©");
                    }

                    localStorage.setItem('cart', JSON.stringify(cart));
                    updateCounts();
                });

                card.querySelector('.add-to-fav').addEventListener('click', (e) => {
                    e.stopPropagation();
                    let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
                    if (!favorites.some(item => item.id === product.id)) {
                        favorites.push(product);
                        localStorage.setItem('favorites', JSON.stringify(favorites));
                        updateCounts();
                        showToast("â¤ï¸ ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©");
                    } else {
                        showToast("âš ï¸ Ø§Ù„Ù…Ù†ØªØ¬ Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„ ÙÙŠ Ø§Ù„Ù…ÙØ¶Ù„Ø©");
                    }
                });

                grid.appendChild(card);
            });

            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±Ø© ÙˆØ§Ù„ÙØ±Ø² Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
            const activeFilter = document.querySelector('.filter-btn.active');
            const searchTerm = document.getElementById('search-filter').value;

            if (activeFilter) {
                const category = activeFilter.dataset.category || 'all';
                filterProducts(category, searchTerm);

                // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø²Ø± Ø¨Ù‡ data-sort Ø·Ø¨Ù‚ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø£ÙŠØ¶Ø§Ù‹
                if (activeFilter.dataset.sort) {
                    sortProducts(activeFilter.dataset.sort);
                }
            } else {
                filterProducts('all', '');
            }
        }

        function setupFilters() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            const searchInput = document.getElementById('search-filter');

            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    const category = button.dataset.category || 'all';
                    const searchTerm = searchInput.value;

                    filterProducts(category, searchTerm);

                    if (button.dataset.sort) {
                        sortProducts(button.dataset.sort);
                    }
                });
            });

            searchInput.addEventListener('input', () => {
                const activeFilter = document.querySelector('.filter-btn.active');
                const category = activeFilter ? activeFilter.dataset.category || 'all' : 'all';
                const searchTerm = searchInput.value;
                filterProducts(category, searchTerm);
            });
        }

        function sortProducts(sortType) {
            const grid = document.getElementById('product-grid');
            const productCards = Array.from(document.querySelectorAll('.product-card:not([style*="display: none"])'));

            productCards.sort((a, b) => {
                const priceA = parseFloat(a.dataset.price);
                const priceB = parseFloat(b.dataset.price);

                if (sortType === 'price-asc') {
                    return priceA - priceB;
                } else if (sortType === 'price-desc') {
                    return priceB - priceA;
                }
                return 0;
            });

            productCards.forEach(card => grid.appendChild(card));
        }

        function setupBackToTop() {
            const backToTopBtn = document.getElementById('backToTop');

            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    backToTopBtn.classList.add('visible');
                } else {
                    backToTopBtn.classList.remove('visible');
                }
            });

            backToTopBtn.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }

        function setupFilterToggle() {
            const filterToggle = document.getElementById('filterToggle');
            const headerFilters = document.getElementById('headerFilters');

            filterToggle.addEventListener('click', () => {
                headerFilters.classList.toggle('active');
            });
        }

        function doLogin() {
            window.location.href = 'login.html';
        }

      function updateAuthUI() {
          const user = localStorage.getItem('loggedInUser');
          const userIcon = document.getElementById('userIcon');
          const loginBtn = document.getElementById('loginBtn');

          if (user) {
              loginBtn.style.display = "none";
              userIcon.style.display = "flex";
              userIcon.innerHTML = '<i class="fas fa-user"></i>'; // Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
          } else {
              loginBtn.style.display = "inline-block";
              userIcon.style.display = "none";
              userIcon.innerHTML = ''; // Ù…Ø³Ø­ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
          }
      }

        function updateCounts() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const favorites = JSON.parse(localStorage.getItem('favorites')) || [];
            document.getElementById('cart-count').innerText = cart.reduce((total, item) => total + (item.quantity || 1), 0);
            document.getElementById('wishlist-count').innerText = favorites.length;
            document.getElementById('cart-count').style.display = cart.length > 0 ? 'inline-block' : 'none';
            document.getElementById('wishlist-count').style.display = favorites.length > 0 ? 'inline-block' : 'none';
        }

        window.addEventListener('DOMContentLoaded', () => {
            loadProducts();
            setupFilters();
            setupBackToTop();
            setupFilterToggle();
            updateAuthUI();
            updateCounts();
        });
    </script>

</body>
</html>
